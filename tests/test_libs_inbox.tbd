# -----------------------------------------------------------------------------
# Test File Extension: pdf - pdf_text_ok_protected.
# -----------------------------------------------------------------------------
@pytest.mark.issue
def test_file_extension_pdf_ok_protected(fxtr_new_db_empty_inbox):
    """Test: pdf - text - protected.

    Due to the write protection, the original file should remain
    unchanged in the inbox.
    """
    inbox = libs.cfg.config[libs.cfg.DCR_CFG_DIRECTORY_INBOX]
    inbox_accepted = libs.cfg.config[libs.cfg.DCR_CFG_DIRECTORY_INBOX_ACCEPTED]
    inbox_rejected = libs.cfg.config[libs.cfg.DCR_CFG_DIRECTORY_INBOX_REJECTED]

    file_inbox = os.path.join(inbox, "pdf_text_ok_protected.pdf")
    file_source = os.path.join(TESTS_INBOX, "pdf_text_ok_protected.pdf")

    shutil.copy(file_source, inbox)

    verify_inboxes_before(inbox, inbox_accepted, inbox_rejected, file_inbox)

    dcr.main([libs.cfg.DCR_ARGV_0, libs.cfg.RUN_ACTION_PROCESS_INBOX])

    verify_inbox_after(inbox, inbox_accepted, inbox_rejected, file_inbox)


# -----------------------------------------------------------------------------
# Test File Extension: xxx - unknown_file_extension_protected.
# -----------------------------------------------------------------------------
@pytest.mark.issue
def test_file_extension_unknown_ok_protected(fxtr_new_db_empty_inbox):
    """Test: xxx - protected.

    Due to the write protection, the original file should remain
    unchanged in the inbox.
    """
    inbox = libs.cfg.config[libs.cfg.DCR_CFG_DIRECTORY_INBOX]
    inbox_accepted = libs.cfg.config[libs.cfg.DCR_CFG_DIRECTORY_INBOX_ACCEPTED]
    inbox_rejected = libs.cfg.config[libs.cfg.DCR_CFG_DIRECTORY_INBOX_REJECTED]

    file_inbox = os.path.join(inbox, "unknown_file_extension_protected.pdf")
    file_source = os.path.join(
        TESTS_INBOX, "unknown_file_extension_protected.pdf"
    )

    shutil.copy(file_source, inbox)

    verify_inboxes_before(inbox, inbox_accepted, inbox_rejected, file_inbox)

    dcr.main([libs.cfg.DCR_ARGV_0, libs.cfg.RUN_ACTION_PROCESS_INBOX])

    verify_inbox_after(inbox, inbox_accepted, inbox_rejected, file_inbox)




